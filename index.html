<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MD Movers - Trip Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="logo.png">
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#F1F3F7]">

<!-- ================ PREMIUM HEADER ================ -->
<header class="w-full bg-[#0B1C3F] text-white shadow-xl border-b-4 border-[#C22621]">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-6 py-4">
        <div class="flex items-center gap-4">
            <img src="logo.png" class="w-14 drop-shadow-xl">
            <div>
                <h1 class="text-3xl font-extrabold tracking-wide">MD MOVERS FLEET SYSTEM</h1>
                <p class="text-xs text-gray-300 -mt-1">MOVING GOODNESS ‚Äî Since 2021 üöõ</p>
            </div>
        </div>

        <nav class="flex gap-3 font-semibold">
            <a href="index.html" class="px-4 py-2 bg-[#C22621] rounded-md hover:bg-red-700">Calculator</a>
            <a href="history.html" class="px-4 py-2 bg-gray-700 rounded-md hover:bg-gray-900">Trip History</a>
        </nav>
    </div>
</header>

<!-- ============== MAIN BOX ============== -->
<div class="max-w-4xl mx-auto bg-white shadow-2xl mt-10 p-8 rounded-xl">

<h2 class="text-3xl font-bold text-center mb-6 text-[#0B1C3F]">üßæ Trip Calculator</h2>

<!-- INPUTS -->
<div class="grid grid-cols-2 gap-4">

<input id="from" value="Hazira" class="p-2 border rounded" />
<select id="to" class="p-2 border rounded">
<option>Taloja</option><option>Kalamboli</option><option>Panvel</option>
<option>Thane</option><option>Khopoli</option><option>Khalapur</option>
<option>Ahemdabad</option><option>Bavla</option><option>Vatva</option>
<option>Changodar</option><option>Khatrej</option><option>Sanand</option>
<option>Kalol</option><option>Chhatral</option><option>Gandhinagar</option>
<option>Mehsana</option><option>Vithalapur</option><option>Vadodara</option>
<option>Savli</option><option>Por</option><option>Kheda</option>
<option>Halol</option><option>Vadindar</option>
</select>

<input id="loadKm" type="number" placeholder="Load KM" class="border p-2 rounded">
<input id="emptyKm" type="number" placeholder="Empty KM" class="border p-2 rounded">

<input id="qty" type="number" placeholder="Qty (MT)" class="border p-2 rounded">
<input id="rate" type="number" placeholder="Rate ‚Çπ/MT" class="border p-2 rounded">

<input id="mamul" type="number" placeholder="Mamul ‚Çπ" class="border p-2 rounded">
<input id="commission" type="number" placeholder="Commission %" class="border p-2 rounded">

<input id="avgLoad" value="2.1" class="border p-2 rounded">
<input id="avgEmpty" value="4.0" class="border p-2 rounded">
<input id="dieselRate" placeholder="Diesel Rate ‚Çπ" class="border p-2 rounded">
</div>

<button onclick="calculate()" class="w-full bg-black text-white py-3 mt-6 rounded hover:bg-gray-800">
üöõ CALCULATE & SAVE
</button>

<!-- ACTION BUTTONS -->
<div class="flex flex-col md:flex-row gap-3 mt-4">
<button onclick="shareWhatsApp()" class="flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700">
WhatsApp Share
</button>
<button onclick="window.print()" class="flex-1 bg-gray-700 text-white py-2 rounded hover:bg-gray-900">
Print / Save as PDF
</button>
</div>

<!-- RESULT -->
<div id="result" class="mt-6 text-xl font-bold text-gray-800"></div>
</div>


<!-- ==================== JAVASCRIPT ====================== -->
<script>
// CALCULATE & SAVE SYSTEM
function calculate(){
 let from=document.getElementById("from").value;
 let to=document.getElementById("to").value;
 let load=+loadKm.value, empty=+emptyKm.value;
 let qty=+qty.value, rate=+rate.value;
 let mamul=+mamul.value, com=+commission.value;
 let avgL=+avgLoad.value, avgE=+avgEmpty.value, diesel=+dieselRate.value;

 let freight=qty*rate;
 let dieselUsed=(load/avgL)+(empty/avgE);
 let dieselCost=dieselUsed*diesel;
 let commRs=(freight*com/100);
 let net=freight-dieselCost-mamul-commRs;

 document.getElementById("result").innerHTML=
 `Freight ‚Çπ${freight}<br>
 Diesel ${dieselUsed.toFixed(2)} L (‚Çπ${dieselCost.toFixed(0)})<br>
 Commission ‚Çπ${commRs.toFixed(0)}<br>
 Mamul ‚Çπ${mamul}<br>
 <b>Net Saving ‚Çπ${net.toFixed(0)}</b>`;

 // LOCAL SAVE
 let trip={date:new Date().toLocaleString(),route:`${from} ‚Üí ${to}`,qty,rate,net,advUsed:dieselCost,status:(net>0?"Profit":"Loss")};
 let data=JSON.parse(localStorage.getItem("mdTrips"))||[];
 data.push(trip);localStorage.setItem("mdTrips",JSON.stringify(data));

 // CLOUD UPLOAD IF AVAILABLE
 if(window.saveTripToCloud){ saveTripToCloud(trip); }

 alert("Trip Saved ‚úî");
}

// WHATSAPP SHARE
function shareWhatsApp(){
 let text=document.getElementById("result").innerText;
 window.open("https://wa.me/?text="+encodeURIComponent(text),'_blank');
}
</script>


<!-- ============ FIREBASE MODULE (NO EDIT REQUIRED) =========== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig={
 apiKey:"AIzaSyAg2WhxP6f0qr0P5-p6VOvm4_n8CTKchBg",
 authDomain:"md-movers-fleet.firebaseapp.com",
 projectId:"md-movers-fleet",
 storageBucket:"md-movers-fleet.firebasestorage.app",
 messagingSenderId:"386416808558",
 appId:"1:386416808558:web:8101db7f34a55848148c7f"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

// FIREBASE SAVE FUNCTION UNIVERSAL
window.saveTripToCloud=async(trip)=>{
 try{ await addDoc(collection(db,"trips"),trip);console.log("Cloud Save ‚úî");}
 catch(e){console.log("Cloud Save Error ‚ùå",e);}
};
</script>


<footer class="mt-10 bg-[#0B1C3F] text-white text-center py-3">
¬© 2025 MD MOVERS | FLEET AUTOMATION SYSTEM
</footer>

</body>
</html>
